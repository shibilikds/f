<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <title>Fiqh Hub - Shāfiʿī Inheritance & Zakah</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Amiri:wght@400;700&family=Noto+Sans+Malayalam:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', 'Noto Sans Malayalam', sans-serif; 
            background-color: #020617; 
            color: #f1f5f9; 
            overflow-x: hidden; 
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }
        .arabic { font-family: 'Amiri', serif; direction: rtl; }
        .glass-card { 
            background: rgba(15, 23, 42, 0.6); 
            backdrop-filter: blur(16px); 
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05); 
        }
        .bottom-nav { 
            position: fixed; 
            bottom: 0; 
            width: 100%; 
            z-index: 50; 
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        .mahjub-card {
            opacity: 0.5;
            filter: grayscale(0.6);
            border: 1px dashed rgba(255, 255, 255, 0.1) !important;
        }
        .badge-info {
            background: rgba(59, 130, 246, 0.1);
            color: #60a5fa;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.3.1",
    "react-dom": "https://esm.sh/react-dom@18.3.1",
    "react-dom/client": "https://esm.sh/react-dom@18.3.1/client",
    "lucide-react": "https://esm.sh/lucide-react@0.424.0?external=react",
    "react/": "https://esm.sh/react@^19.2.3/",
    "recharts": "https://esm.sh/recharts@^3.6.0"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import ReactDOM from 'react-dom/client';
        import { 
            Home as HomeIcon, Calculator as CalcIcon, Wallet, Scale, ArrowLeft, Plus, Minus, 
            User, ShieldAlert, Ban, Info, AlertCircle, Coins, ArrowRight
        } from 'lucide-react';

        const TRANSLATIONS = {
            en: {
                home: "Home", shares: "Inheritance", value: "Estate Value", zakah: "Zakah Calc", calc: "Calculate",
                title: "Fiqh Hub", subtitle: "Shafi'i Jurisprudence",
                categories: { family: "Primary Family", descendants: "Descendants", siblings: "Siblings", extended: "Extended Family" },
                btnRun: "Run Calculation", back: "Back",
                perPerson: "Per Individual", totalGroup: "Group Total",
                excluded: "Excluded (Mahjub)", blockedBy: "Blocked by presence of",
                cashSavings: "Cash & Savings", goldGrams: "Gold (Grams)",
                fractions: { '1/2': '1/2', '1/4': '1/4', '1/8': '1/8', '1/6': '1/6', '1/3': '1/3', '2/3': '2/3', 'Asaba': 'Asaba', '1/6 + Asaba': '1/6 + Asaba', 'None': 'Excluded' }
            },
            ml: {
                home: "ഹോം", shares: "അനന്തരാവകാശം", value: "സ്വത്ത് മൂല്യം", zakah: "സകാത്ത്", calc: "കണക്കാക്കുക",
                title: "ഫിഖ്ഹ് ഹബ്", subtitle: "ഷാഫിഈ കർമ്മശാസ്ത്രം",
                categories: { family: "അടുത്ത ബന്ധുക്കൾ", descendants: "സന്താനങ്ങൾ", siblings: "സഹോദരങ്ങൾ", extended: "മറ്റു ബന്ധുക്കൾ" },
                btnRun: "കണക്കാക്കുക", back: "പിന്നിലേക്ക്",
                perPerson: "ഒരാൾക്ക് ലഭിക്കുന്നത്", totalGroup: "ആകെ വിഹിതം",
                excluded: "ഹജ്ബ് ചെയ്യപ്പെട്ടു", blockedBy: "തടയപ്പെട്ടത്:",
                cashSavings: "പണം & സേവിങ്‌സ്", goldGrams: "സ്വർണ്ണം (ഗ്രാം)",
                fractions: { '1/2': '1/2 (പകുതി)', '1/4': '1/4 (കാൽ)', '1/8': '1/8 (എട്ടിലൊന്ന്)', '1/6': '1/6 (ആറിലൊന്ന്)', '1/3': '1/3 (മൂന്നിലൊന്ന്)', '2/3': '2/3 (മൂന്നിൽ രണ്ട്)', 'Asaba': 'അസബ (ബാക്കി)', '1/6 + Asaba': '1/6 + അസബ', 'None': 'അവകാശമില്ല' }
            },
            ar: {
                home: "الرئيسية", shares: "المواريث", value: "قيمة التركة", zakah: "الزكاة", calc: "احسب",
                title: "ملتقى الفقه", subtitle: "الفقه الشافعي",
                categories: { family: "الأصول", descendants: "الفروع", siblings: "الحواشي", extended: "العصبات" },
                btnRun: "بدء الحساب", back: "رجوع",
                perPerson: "نصيب الفرد", totalGroup: "إجمالي السهم",
                excluded: "محجوب", blockedBy: "حُجب بوجود",
                cashSavings: "السيولة", goldGrams: "وزن الذهب",
                fractions: { '1/2': '١/٢', '1/4': '١/٤', '1/8': '١/٨', '1/6': '١/٦', '1/3': '١/٣', '2/3': '٢/٣', 'Asaba': 'عصبة', '1/6 + Asaba': '١/٦ + عصبة', 'None': 'محجوب' }
            }
        };

        const HEIR_INFO = {
            husband: { en: "Husband", ml: "ഭർത്താവ്", ar: "الزوج" },
            wife: { en: "Wife", ml: "ഭാര്യ", ar: "الزوجة" },
            sons: { en: "Sons", ml: "ആൺമക്കൾ", ar: "الأبناء" },
            daughters: { en: "Daughters", ml: "പെൺമക്കൾ", ar: "البنات" },
            grandsons: { en: "Grandsons", ml: "പൗത്രൻ", ar: "ابن الابن" },
            granddaughters: { en: "Granddaughters", ml: "പൗത്രി", ar: "بنت الابن" },
            father: { en: "Father", ml: "പിതാവ്", ar: "الأب" },
            mother: { en: "Mother", ml: "മാതാവ്", ar: "الأم" },
            grandfather: { en: "Grandfather", ml: "പിതാമഹൻ", ar: "الجد" },
            patGrandmother: { en: "Paternal Grandma", ml: "അച്ഛന്റെ ഉമ്മ", ar: "الجدة لأب" },
            matGrandmother: { en: "Maternal Grandma", ml: "ഉമ്മയുടെ ഉമ്മ", ar: "الجدة لأم" },
            fullBrothers: { en: "Full Brothers", ml: "സഹോദരൻ (കൂടപ്പിറന്ന)", ar: "الأخ الشقيق" },
            fullSisters: { en: "Full Sisters", ml: "സഹോദരി (കൂടപ്പിറന്ന)", ar: "الأخت الشقيقة" },
            patBrothers: { en: "Pat. Brothers", ml: "സഹോദരൻ (അച്ഛൻ വഴി)", ar: "الأخ لأب" },
            patSisters: { en: "Pat. Sisters", ml: "സഹോദരി (അച്ഛൻ വഴി)", ar: "الأخت لأب" },
            matBrothers: { en: "Mat. Brothers", ml: "സഹോദരൻ (ഉമ്മ വഴി)", ar: "الأخ لأم" },
            matSisters: { en: "Mat. Sisters", ml: "സഹോദരി (ഉമ്മ വഴി)", ar: "الأخت لأم" }
        };

        const Page = { Home: 'home', InheritanceCalc: 'inheritance-calc', InheritanceAmount: 'inheritance-amount', ZakahCalc: 'zakah-calc' };

        const calculateInheritance = (inputs, totalAmount, lang) => {
            let results = [];
            let exclusions = [];
            const { husband, wife, sons, daughters, father, mother, grandsons, granddaughters, grandfather, patGrandmother, matGrandmother } = inputs;
            
            const hasDescendants = (sons > 0 || daughters > 0 || grandsons > 0 || granddaughters > 0);
            const hasMaleDescendants = (sons > 0 || grandsons > 0);

            const addExclusion = (id, blockedById) => {
                if (inputs[id] > 0 || inputs[id] === true) {
                    exclusions.push({ 
                        id, 
                        name: HEIR_INFO[id][lang], 
                        blockedBy: HEIR_INFO[blockedById][lang],
                        fractionKey: 'None',
                        percentage: 0,
                        isMahjub: true
                    });
                }
            };

            // Shafi'i Hajb Rules
            if (father) addExclusion('grandfather', 'father');
            if (mother) { addExclusion('patGrandmother', 'mother'); addExclusion('matGrandmother', 'mother'); }
            if (father) addExclusion('patGrandmother', 'father');
            if (sons > 0) { addExclusion('grandsons', 'sons'); addExclusion('granddaughters', 'sons'); }
            
            const sibBlocker = (father || hasMaleDescendants);
            if (sibBlocker) {
                const bId = father ? 'father' : (sons > 0 ? 'sons' : 'grandsons');
                ['fullBrothers', 'fullSisters', 'patBrothers', 'patSisters', 'matBrothers', 'matSisters'].forEach(id => addExclusion(id, bId));
            }

            const active = { ...inputs };
            exclusions.forEach(e => active[e.id] = 0);

            let totalSharesNum = 0;
            const commonD = 24;

            if (active.husband) {
                const val = hasDescendants ? 6 : 12;
                results.push({ id: 'husband', fractionKey: hasDescendants ? '1/4' : '1/2', percentage: (val/24)*100 });
                totalSharesNum += val;
            } else if (active.wife > 0) {
                const val = hasDescendants ? 3 : 6;
                results.push({ id: 'wife', fractionKey: hasDescendants ? '1/8' : '1/4', percentage: (val/24)*100 });
                totalSharesNum += val;
            }

            if (active.mother) {
                const val = hasDescendants ? 4 : 8;
                results.push({ id: 'mother', fractionKey: hasDescendants ? '1/6' : '1/3', percentage: (val/24)*100 });
                totalSharesNum += val;
            }

            if (active.father && hasMaleDescendants) {
                results.push({ id: 'father', fractionKey: '1/6', percentage: (4/24)*100 });
                totalSharesNum += 4;
            }

            if (active.daughters > 0 && active.sons === 0) {
                const val = active.daughters === 1 ? 12 : 16;
                results.push({ id: 'daughters', fractionKey: active.daughters === 1 ? '1/2' : '2/3', percentage: (val/24)*100 });
                totalSharesNum += val;
            }

            // Adjustment for Awl if needed
            if (totalSharesNum > commonD) {
                results.forEach(r => r.percentage = (((r.percentage/100)*commonD)/totalSharesNum)*100);
            }

            let residue = Math.max(0, 100 - results.reduce((acc, r) => acc + r.percentage, 0));
            if (residue > 0) {
                const asabaTiers = [
                    { id: 'sons', partner: 'daughters' },
                    { id: 'grandsons', partner: 'granddaughters' },
                    { id: 'father', special: true },
                    { id: 'fullBrothers', partner: 'fullSisters' },
                    { id: 'patBrothers', partner: 'patSisters' }
                ];

                for (const tier of asabaTiers) {
                    if (tier.id === 'father' && active.father && !hasMaleDescendants) {
                        const existing = results.find(r => r.id === 'father');
                        if (existing) { existing.percentage += residue; existing.fractionKey = "1/6 + Asaba"; }
                        else results.push({ id: 'father', fractionKey: 'Asaba', percentage: residue });
                        residue = 0; break;
                    }
                    if (active[tier.id] > 0) {
                        const cP = active[tier.id];
                        const cPartner = tier.partner ? (active[tier.partner] || 0) : 0;
                        const units = (cP * 2) + cPartner;
                        const unitVal = residue / units;
                        results.push({ id: tier.id, fractionKey: 'Asaba', percentage: unitVal * 2 * cP });
                        if (cPartner > 0) results.push({ id: tier.partner, fractionKey: 'Asaba', percentage: unitVal * cPartner });
                        residue = 0; break;
                    }
                }
            }

            return [...results, ...exclusions].map(r => ({
                ...r,
                name: HEIR_INFO[r.id][lang],
                amount: totalAmount ? (r.percentage/100) * totalAmount : 0,
                fraction: TRANSLATIONS[lang].fractions[r.fractionKey] || r.fractionKey
            }));
        };

        const HeirCard = ({ r, count, lang, mode }) => {
            const t = TRANSLATIONS[lang];
            const isExcluded = r.isMahjub;
            return (
                <div className={`p-6 rounded-3xl glass-card border flex flex-col transition-all ${isExcluded ? 'mahjub-card' : 'hover:border-blue-500/30'}`}>
                    <div className="flex justify-between items-start mb-4">
                        <div>
                            <h3 className={`font-black text-xl uppercase tracking-tight ${isExcluded ? 'text-slate-500' : 'text-slate-100'}`}>
                                {r.name} {count > 1 && `(${count})`}
                            </h3>
                            {isExcluded && (
                                <p className="mt-2 text-[10px] font-bold text-blue-400 uppercase tracking-widest bg-blue-400/5 px-2 py-1 rounded-lg inline-block">
                                    {t.blockedBy} {r.blockedBy}
                                </p>
                            )}
                        </div>
                        {!isExcluded && (
                            <div className="text-right">
                                <div className="text-2xl font-black text-blue-400 tracking-tighter">{r.fraction}</div>
                                <div className="text-sm font-black text-slate-500">{r.percentage.toFixed(2)}%</div>
                            </div>
                        )}
                    </div>
                    {!isExcluded && mode === 'amount' && (
                        <div className="mt-auto pt-4 border-t border-white/5">
                            <span className="text-[10px] font-black text-slate-500 uppercase block mb-1">Value</span>
                            <div className="text-xl font-black text-white">₹{r.amount.toLocaleString(undefined, { maximumFractionDigits: 0 })}</div>
                            {count > 1 && <div className="text-[9px] text-blue-400 font-bold uppercase mt-1">₹{(r.amount/count).toLocaleString()} per person</div>}
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [page, setPage] = useState(Page.Home);
            const [lang, setLang] = useState('ml');
            const [inputs, setInputs] = useState({ husband: false, wife: 0, father: false, mother: false, grandfather: false, patGrandmother: false, matGrandmother: false, sons: 0, daughters: 0, grandsons: 0, granddaughters: 0, fullBrothers: 0, fullSisters: 0, patBrothers: 0, patSisters: 0, matBrothers: 0, matSisters: 0 });
            const [estate, setEstate] = useState(0);
            const [results, setResults] = useState(null);
            const [goldPrice, setGoldPrice] = useState(7950);
            const [zakahInputs, setZakahInputs] = useState({ cash: 0, gold: 0 });
            const [zakahRes, setZakahRes] = useState(null);

            const t = TRANSLATIONS[lang];

            const renderHome = () => (
                <div className={`space-y-12 animate-fade-in ${lang === 'ar' ? 'arabic' : ''}`}>
                    <section className="text-center py-10">
                        <div className="inline-block p-8 bg-blue-600/10 rounded-[3rem] mb-6 border border-blue-400/20"><Scale className="text-blue-400" size={56} /></div>
                        <h2 className="text-5xl font-black text-white tracking-tighter mb-2 uppercase">{t.title}</h2>
                        <span className="text-[10px] font-black tracking-[0.4em] text-blue-400 uppercase">{t.subtitle}</span>
                    </section>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <button onClick={() => setPage(Page.InheritanceCalc)} className="p-10 glass-card rounded-[2.5rem] hover:border-blue-400 group transition-all text-left">
                            <div className="bg-blue-600 p-4 rounded-2xl mb-6 inline-block"><CalcIcon size={28}/></div>
                            <h3 className="text-2xl font-black uppercase tracking-tight">{t.shares}</h3>
                            <p className="text-xs text-slate-500 mt-2 font-bold uppercase tracking-widest">Fara'id Calculator</p>
                        </button>
                        <button onClick={() => setPage(Page.InheritanceAmount)} className="p-10 glass-card rounded-[2.5rem] hover:border-blue-400 group transition-all text-left">
                            <div className="bg-indigo-600 p-4 rounded-2xl mb-6 inline-block"><Wallet size={28}/></div>
                            <h3 className="text-2xl font-black uppercase tracking-tight">{t.value}</h3>
                            <p className="text-xs text-slate-500 mt-2 font-bold uppercase tracking-widest">Estate Distribution</p>
                        </button>
                        <button onClick={() => setPage(Page.ZakahCalc)} className="p-10 glass-card rounded-[2.5rem] hover:border-emerald-400 group transition-all text-left">
                            <div className="bg-emerald-600 p-4 rounded-2xl mb-6 inline-block"><Scale size={28}/></div>
                            <h3 className="text-2xl font-black uppercase tracking-tight">{t.zakah}</h3>
                            <p className="text-xs text-slate-500 mt-2 font-bold uppercase tracking-widest">Asset Purification</p>
                        </button>
                    </div>

                    <div className="p-8 glass-card rounded-3xl border border-blue-400/10 flex justify-between items-center">
                        <div className="flex items-center gap-4">
                            <div className="p-3 bg-amber-500/10 rounded-xl"><Coins className="text-amber-500" size={24}/></div>
                            <div>
                                <h4 className="text-[10px] font-black text-slate-500 uppercase tracking-widest">Gold Reference</h4>
                                <div className="text-xl font-black">₹{goldPrice.toLocaleString()} <span className="text-sm text-slate-500">/ g</span></div>
                            </div>
                        </div>
                        <div className="text-[9px] font-black uppercase bg-blue-600/10 text-blue-400 px-3 py-1 rounded-full border border-blue-400/20">24K Market Live</div>
                    </div>
                </div>
            );

            const renderInherit = (mode) => {
                if (results) return (
                    <div className="space-y-8 animate-fade-in pb-32">
                        <button onClick={() => setResults(null)} className="flex items-center gap-2 text-blue-400 font-black uppercase text-xs tracking-widest"><ArrowLeft size={16}/> {t.back}</button>
                        <div className="flex justify-between items-end border-b border-white/5 pb-8">
                            <h2 className="text-4xl font-black uppercase tracking-tighter">{t.shares} Report</h2>
                            {mode === 'amount' && <div className="text-right text-blue-400 font-black text-2xl">₹{estate.toLocaleString()}</div>}
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {results.map((r, i) => (
                                <HeirCard key={i} r={r} count={['husband','father','mother','grandfather'].includes(r.id) ? 1 : inputs[r.id]} lang={lang} mode={mode} />
                            ))}
                        </div>
                    </div>
                );

                return (
                    <div className="space-y-10 animate-fade-in pb-32">
                        <div className="flex items-center gap-4"><button onClick={() => setPage(Page.Home)} className="p-3 bg-slate-900 rounded-xl"><ArrowLeft size={20}/></button><h2 className="text-2xl font-black uppercase">{mode === 'amount' ? t.value : t.shares}</h2></div>
                        <div className="glass-card rounded-[3rem] p-8 lg:p-12 space-y-12">
                            {mode === 'amount' && (
                                <div className="max-w-xs mx-auto text-center space-y-3">
                                    <label className="text-[10px] font-black text-slate-500 uppercase tracking-widest">Net Estate (INR)</label>
                                    <input type="number" className="w-full p-6 bg-slate-950 border border-white/10 rounded-3xl text-3xl font-black text-center text-white" onChange={e => setEstate(Number(e.target.value))} placeholder="0.00" />
                                </div>
                            )}
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                                <button onClick={()=>setInputs(p=>({...p, husband:!p.husband, wife:0}))} className={`p-5 rounded-2xl border flex justify-between items-center ${inputs.husband ? 'bg-blue-600/10 border-blue-400 text-white' : 'bg-slate-950 border-white/5 text-slate-500'}`}><span className="text-[10px] font-black uppercase tracking-tight">{HEIR_INFO.husband[lang]}</span><div className={`w-4 h-4 rounded-full border-2 ${inputs.husband ? 'bg-blue-400' : 'border-slate-800'}`}/></button>
                                <div className="p-5 rounded-2xl bg-slate-950 border border-white/5 flex flex-col gap-3">
                                    <span className="text-[10px] font-black text-slate-500 uppercase">{HEIR_INFO.wife[lang]}</span>
                                    <div className="flex justify-between items-center"><button onClick={()=>setInputs(p=>({...p, wife:Math.max(0, p.wife-1), husband:false}))} className="p-2 bg-slate-900 rounded-lg"><Minus size={12}/></button><span className="font-black">{inputs.wife}</span><button onClick={()=>setInputs(p=>({...p, wife:p.wife+1, husband:false}))} className="p-2 bg-slate-900 rounded-lg"><Plus size={12}/></button></div>
                                </div>
                                {['father','mother','grandfather','patGrandmother','matGrandmother'].map(id => (
                                    <button key={id} onClick={()=>setInputs(p=>({...p, [id]:!p[id]}))} className={`p-5 rounded-2xl border flex justify-between items-center ${inputs[id] ? 'bg-blue-600/10 border-blue-400 text-white' : 'bg-slate-950 border-white/5 text-slate-500'}`}><span className="text-[10px] font-black uppercase tracking-tight">{HEIR_INFO[id][lang]}</span><div className={`w-4 h-4 rounded-full border-2 ${inputs[id] ? 'bg-blue-400' : 'border-slate-800'}`}/></button>
                                ))}
                                {['sons','daughters','fullBrothers','fullSisters','patBrothers','patSisters'].map(id => (
                                    <div key={id} className="p-5 rounded-2xl bg-slate-950 border border-white/5 flex flex-col gap-3">
                                        <span className="text-[10px] font-black text-slate-500 uppercase">{HEIR_INFO[id][lang]}</span>
                                        <div className="flex justify-between items-center"><button onClick={()=>setInputs(p=>({...p, [id]:Math.max(0, p[id]-1)}))} className="p-2 bg-slate-900 rounded-lg"><Minus size={12}/></button><span className="font-black">{inputs[id]}</span><button onClick={()=>setInputs(p=>({...p, [id]:p[id]+1}))} className="p-2 bg-slate-900 rounded-lg"><Plus size={12}/></button></div>
                                    </div>
                                ))}
                            </div>
                            <button onClick={()=>setResults(calculateInheritance(inputs, estate, lang))} className="w-full bg-blue-600 py-6 rounded-2xl font-black uppercase tracking-widest text-lg shadow-xl hover:bg-blue-500 transition-all">{t.btnRun}</button>
                        </div>
                    </div>
                );
            };

            const renderZakah = () => (
                <div className="space-y-10 animate-fade-in pb-32">
                    <div className="flex items-center gap-4"><button onClick={() => setPage(Page.Home)} className="p-3 bg-slate-900 rounded-xl"><ArrowLeft size={20}/></button><h2 className="text-2xl font-black uppercase">{t.zakah}</h2></div>
                    <div className="glass-card rounded-[3rem] p-8 lg:p-12 space-y-12">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div className="space-y-3"><label className="text-[10px] font-black text-slate-500 uppercase tracking-widest">{t.cashSavings}</label><input type="number" className="w-full p-6 bg-slate-950 border border-white/5 rounded-2xl font-black text-xl" onChange={e=>setZakahInputs(p=>({...p, cash:Number(e.target.value)}))} /></div>
                            <div className="space-y-3"><label className="text-[10px] font-black text-slate-500 uppercase tracking-widest">{t.goldGrams}</label><input type="number" className="w-full p-6 bg-slate-950 border border-white/5 rounded-2xl font-black text-xl" onChange={e=>setZakahInputs(p=>({...p, gold:Number(e.target.value)}))} /></div>
                        </div>
                        <button onClick={() => {
                            const total = zakahInputs.cash + (zakahInputs.gold * goldPrice);
                            const nisab = 85 * goldPrice;
                            setZakahRes(total >= nisab ? total * 0.025 : 0);
                        }} className="w-full bg-emerald-600 py-6 rounded-2xl font-black uppercase tracking-widest text-lg shadow-xl hover:bg-emerald-500 transition-all">{t.calc}</button>
                        {zakahRes !== null && (
                            <div className="p-10 bg-slate-950/80 rounded-3xl border border-emerald-400/20 text-center animate-fade-in">
                                <span className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase ${zakahRes > 0 ? 'bg-emerald-500/10 text-emerald-400' : 'bg-rose-500/10 text-rose-400'}`}>{zakahRes > 0 ? "Wajib (Payable)" : "Exempt"}</span>
                                <h3 className="text-5xl font-black mt-8 tracking-tighter">₹ {zakahRes.toLocaleString()}</h3>
                            </div>
                        )}
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen flex flex-col">
                    <header className="bg-slate-900/60 backdrop-blur-xl border-b border-white/5 p-5 sticky top-0 z-50 flex justify-between items-center">
                        <div className="flex items-center gap-3"><Scale className="text-blue-400" size={28}/><h1 className="font-black text-xl tracking-tighter">{t.title}</h1></div>
                        <div className="flex bg-slate-950 p-1 rounded-xl border border-white/10">
                            {['en','ml','ar'].map(l => (
                                <button key={l} onClick={()=>setLang(l)} className={`px-4 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${lang === l ? 'bg-blue-600 text-white' : 'text-slate-500'}`}>{l}</button>
                            ))}
                        </div>
                    </header>
                    <main className="flex-grow w-full max-w-6xl mx-auto p-6 lg:p-12">
                        {page === Page.Home && renderHome()}
                        {page === Page.InheritanceCalc && renderInherit('share')}
                        {page === Page.InheritanceAmount && renderInherit('amount')}
                        {page === Page.ZakahCalc && renderZakah()}
                    </main>
                    <nav className="bottom-nav bg-slate-950/95 flex justify-around py-4 lg:hidden">
                        <button onClick={()=>setPage(Page.Home)} className={`flex flex-col items-center gap-1 ${page === Page.Home ? 'text-blue-400' : 'text-slate-500'}`}><HomeIcon size={20}/><span className="text-[9px] font-black uppercase tracking-widest">{t.home}</span></button>
                        <button onClick={()=>setPage(Page.InheritanceCalc)} className={`flex flex-col items-center gap-1 ${page === Page.InheritanceCalc ? 'text-blue-400' : 'text-slate-500'}`}><CalcIcon size={20}/><span className="text-[9px] font-black uppercase tracking-widest">{t.shares}</span></button>
                        <button onClick={()=>setPage(Page.ZakahCalc)} className={`flex flex-col items-center gap-1 ${page === Page.ZakahCalc ? 'text-blue-400' : 'text-slate-500'}`}><Scale size={20}/><span className="text-[9px] font-black uppercase tracking-widest">{t.zakah}</span></button>
                    </nav>
                </div>
            );
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>